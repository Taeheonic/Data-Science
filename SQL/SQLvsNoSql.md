# Sql vs NoSql (Not only Sql)

## Sql (Relational Database Management System - 관계형 데이터베이스)

### Sql은 구조화된 쿼리언어 (Structured Query Language)의 약자임. Sql이라고 하면 주로 관계형 데이터베이스라는 의미로 사용되기도함. Sql을 사용하면 관계형 데이터베이스 관리 시스템 (RDBMS)에서 데이터를 저장, 수정, 삭제, 및 검색할 수 있음.

### 관계형 데이터베이스의 두 가지 주요 특징

* 데이터는 **정해진 (엄격한) 데이터 스키마 (structure)를** 따라 데이터베이스 테이블에 저장됨.
* 데이터는 **관계**를 통해서 연결된 **여러개의 테이블에 분산**됨.

### 1\. 엄격한 스키마

* 데이터는 테이블(table)에 레코드(record)로 저장되며, 각 테이블에는 명확하게 정의된 구조(structure)가 있음. 구조란 어떤 데이터가 테이블에 들어가고 어떤 데이터가 그렇지 않은지를 정의하는 필드(field) 집합을 가리킴.
* 구조(structure)는 필드의 이름과 데이터 유형으로 정의됨.
* ![image.png](/files/2833920573844941829)
* 관계형 데이터베이스에서 스키마를 준수하지 않는 레코드는 추가할 수 없음. 다시말해 한번 구조화가된 테이블은 스키마를 뜯어고치지않는한 필드를 추가하거나 뺄 수가 없음.

### 2\. 관계

* 데이터들을 여러개의 테이블에 나누어서, 데이터들의 중복을 피할 수 있음. 만약 사용자가 구입한 상품들을 나타내기 위해서는, Users(사용자), Products(상품), Orders(주문한 상품) 여러 테이블을 만들어야 하지만, 각각의 테이블들은 다른 테이블에 저장되지 않은 데이터 만을 가지고 있음. (중복된 데이터가 없음.)
* ![image.png](/files/2833935437906394930)
* 이런 명확한 구조는 장점이 있음. 하나의 테이블에서 중복없이 하나의 데이터만을 관리하기 때문에, 다른 테이블에서 부정확한 데이터를 다룰 위험이 없음.

## NoSql (Not only Sql - 비관계형 데이터베이스)

### NoSql은 기본적으로 Sql(관계형 데이터베이스)와 반대되는 접근방식을 따르기 때문에 지어진 이름.

* 스키마 없음.
* 관계 없음.
* NoSql에서는 레코드를 문서(documents)라고 부름.
* Sql 데이터베이스와 핵심적인 차이점은 Sql에서는 정해진 스키마를 따르지 않으면 데이터를 추가할 수 없지만, NoSql에서는 다른 구조의 데이터를 같은 컬렉션(Sql에서의 테이블)에 추가할 수 있음.
* ![image.png](/files/2833937156689578766)
* 문서는 JSON과 비슷한 형식임.
* 일반적으로 관련 데이터를 동일한 컬렉션에 넣음. (관계형 데이터베이스 처럼 여러 테이블에 나누어 담지 않음.) 따라서 많은 Order(주문한 상품)이 있는 경우, 일반적인 정보를 모두 포함한 데이터를 Orders 컬렉션에 저장함. (즉, 관계형데이터 베이스에서 사용했던 Users나 Products 정보 또한 Orders에 포함해서 한꺼번에 저장됨.)
* 따라서 Join이라는 개념이 존재하지 않음.
* 대신 컬렉션을 통해 **데이터를 복제**하여 각 컬렉션 일부분에 속하는 데이터를 정확하게 산출하도록 함.
* ![image.png](/files/2833938777123118653)
* 위와 같은 방식은 데이터가 중복되기 때문에 불안정한 측면이 존재. 컬렉션 B에서는 데이터를 수정하지 않았는데, 컬렉션 A에서만 데이터를 업데이트 할 위험이 있음.
* 그럼에도 불구하고, 이러한 방식의 큰 장점은 복잡하고 느린 Join을 사용할 필요가 없다는 것.

## 데이터 확장 측면에서의 Sql과 NoSql의 차이

### 수직적 확장 (Scale up) vs 수평적 확장 (Scale out)

* 수직적 확장이란 단순히 데이터베이스 서버의 성능을 향상시키는 것. (예를 들어, CPU를 업그레이드 하는 방식으로)
* 수평적 확장은 더 많은 서버가 추가되고 데이터베이스가 전체적으로 분산됨을 의미함. 따라서 하나의 데이터베이스에서 작동하지만 여러 호스트에서 작동함.
* ![image.png](/files/2833943021491086949)
* 데이터가 저장되는 방식 때문에 SQL 데이터베이스는 일반적으로 수직적 확장만을 지원. 수평적 확장은 NoSQL 데이터베이스에서만 가능.

## Sql과 NoSql 데이터베이스의 장단점

### Sql의 장점

* 명확하게 정의 된 스키마, **데이터 무결성 보장**
* 관계는 각 데이터를 중복없이 한번만 저장할 수 있게 함
* 데이터의 일관성
* 정규화에 따른 갱신 비용 최소화
* 다양한 용도로 사용가능, 인반적으로 높은 성능 (범용적/고성능)

### NoSql의 장점

* 스키마가 없기때문에 훨씬 더 **유연**함. 즉, 언제든지 저장된 데이터를 조정하고 새로운 필드를 추가할 수 있음.
* 데이터는 어플리케이션이 필요로하는 형식으로 저장됨. 따라서 데이터를 읽어오는 **속도가 빠름**.
* 대용량 데이터 처리
* 데이터 분산 처리
* 클라우드 컴퓨팅

### Sql의 단점

* 상대적으로 **덜 유연**. **데이터 스키마는 사전에 계획**되고 알려져야 함. (나중에 수정하기가 번거롭거나 불가능 할 수 있음.)
* 관계를 맺고 있기 때문에, **Join문이 많은 복잡한 쿼리가** 만들어질 수 있음.
* 대량의 데이터 입력 처리
* 컬럼의 확장이 어려움

### NoSql의 단점

* 데이터가 여러 컬렉션에 중복되어 있기 때문에, 수정(update)를 해야 하는 경우 모든 컬렉션에서 수행해야 함을 의미함. (SQL 세계에서는 중복된 데이터가 없기 때문에 한번만 수행하면 됨.)

## 언제 Sql과 NoSql을 사용해야할까?

### Sql

* 관계를 맺고 있는 데이터가 자주 변경(수정)되는 애플리케이션일 경우
* 변경될 여지가 없고, 명확한 스키마가 사용자와 데이터에게 중요한 경우

### NoSql

* 정확한 데이터 구조를 알 수 없거나 변경 / 확장 될 수 있는 경우
* 읽기(read)처리를 자주하지만, 데이터를 자주 변경(update)하지 않는 경우 (즉, 한번의 변경으로 수십 개의 문서를 업데이트 할 필요가 없는 경우)
* 데이터베이스를 수평으로 확장해야 하는 경우 ( 즉, 막대한 양의 데이터를 다뤄야 하는 경우)

## Sql/NoSql 종류

### Sql의 종류

* Oracle
* MS-Sql Server (Microsoft)
* MySql (Oracle)
* DB2 (IBM)
* Infomix (IBM)
* Derby (Apache)
* SQLite (Opensource)
* PostgreSql
* MariaDB

### NoSql의 종류

* **key / value 형**
* 휘발성/영속성
* Flare, Redis
* **Document 형**
* 스키마 정의 없음
* MongoDB, CouchDB
* **Big Table(column) 형**
* 뛰어난 확장성, 검색에 유리
* Hbase, Casandara, Hypertable
